{% extends 'base.html.twig' %}

{% block title %}Inscription{% endblock %}

{% block body %}
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">Inscription</div>
                    <div class="card-body">
                        {{ form_start(registrationForm, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}
                            <div class="form-group">
                                {{ form_row(registrationForm.email, {'attr': {'class': 'form-control', 'placeholder': 'Email'}}) }}
                            </div>
                            <div class="form-group">
                                {{ form_row(registrationForm.password, {'attr': {'class': 'form-control', 'placeholder': 'Mot de passe'}}) }}
                            </div>
                            <div class="form-group">
                                {{ form_row(registrationForm.nom, {'attr': {'class': 'form-control', 'placeholder': 'Nom'}}) }}
                            </div>
                            <div class="form-group">
                                {{ form_row(registrationForm.prenom, {'attr': {'class': 'form-control', 'placeholder': 'Prénom'}}) }}
                            </div>
                            <div class="form-group">
                                {{ form_row(registrationForm.telephone, {'attr': {'class': 'form-control', 'placeholder': 'Téléphone'}}) }}
                            </div>
                            <div class="form-group">
                                {{ form_row(registrationForm.type_client, {'attr': {'class': 'form-control', 'id': 'type_client'}}) }}
                            </div>
                            <div id="professional-fields" style="display: none;">
                                <div class="form-group">
                                    {{ form_row(registrationForm.siret, {'attr': {'class': 'form-control', 'placeholder': 'SIRET'}}) }}
                                </div>
                                <div class="form-group">
                                    {{ form_row(registrationForm.entreprise, {'attr': {'class': 'form-control', 'placeholder': 'Entreprise'}}) }}
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary mt-5">S'inscrire</button>
                        {{ form_end(registrationForm) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var typeClientField = document.querySelector('#type_client');
            var professionalFields = document.getElementById('professional-fields');
            var siretField = document.querySelector('#{{ registrationForm.siret.vars.id }}');
            var entrepriseField = document.querySelector('#{{ registrationForm.entreprise.vars.id }}');

            if (typeClientField) {
                function toggleProfessionalFields() {
                    if (typeClientField.value === 'professionnel') {
                        professionalFields.style.display = 'block';
                        siretField.required = true;
                        entrepriseField.required = true;
                    } else {
                        professionalFields.style.display = 'none';
                        siretField.required = false;
                        entrepriseField.required = false;
                    }
                }

                typeClientField.addEventListener('change', toggleProfessionalFields);

                // Call the function on page load to set the correct state
                toggleProfessionalFields();
            } else {
                console.error('Element with ID "type_client" not found.');
            }
        });
    </script>
{% endblock %}





